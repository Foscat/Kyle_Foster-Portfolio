/* ============================================================
   Mermaid Theme — Midnight Gold
   Applies UI palette + glass aesthetics to all diagrams.
   ============================================================ */

.mermaid {
  font-family: "Lexend Deca", sans-serif;
  background: transparent !important;
  color: var(--text-primary);
}

/* -------------------------------
   Nodes
   ------------------------------- */
.mermaid .node rect,
.mermaid .node polygon {
  fill: rgba(255, 255, 255, 0.05) !important;      /* frosted look */
  stroke: var(--accent-light) !important;            /* gold border */
  stroke-width: 2px !important;
  rx: 12px;                                          /* rounded corners */
  ry: 12px;
  -webkit-backdrop-filter: blur(12px);
  backdrop-filter: blur(12px);
}

.mermaid .node text {
  fill: var(--text-primary) !important;
  font-weight: 600;
}

/* -------------------------------
   Edges / Arrows
   ------------------------------- */
.mermaid .edgePath .path {
  stroke: var(--accent) !important;       /* gold */
  stroke-width: 2px;
  stroke-linecap: round;
}

.mermaid .arrowheadPath {
  fill: var(--accent-light) !important;
}

/* -------------------------------
   Titles
   ------------------------------- */
.mermaid .label text {
  fill: var(--accent-light) !important;
  font-size: 1rem;
  font-weight: 700;
}

/* -------------------------------
   Sequence Diagrams
   ------------------------------- */
.mermaid .actor rect {
  fill: rgba(255,255,255,0.08) !important;
  stroke: var(--accent) !important;
}

.mermaid .actor text {
  fill: var(--text-primary) !important;
}

.mermaid line {
  stroke: var(--accent-light) !important;
}

/* -------------------------------
   Lifelines
   ------------------------------- */
.mermaid .lifeline {
  stroke: var(--primary-light) !important;
}

/* -------------------------------
   Notes
   ------------------------------- */
.mermaid .note {
  fill: rgba(255,255,255,0.1) !important;
  stroke: var(--accent-light) !important;
  border-radius: 10px;
}

.mermaid .noteText {
  fill: var(--text-primary) !important;
}


/* ============================================================
   Mermaid Theme — Midnight Gold (Dark + Light Variants)
   ============================================================ */

.mermaid-container.light .mermaid .node rect,
.mermaid-container.light .mermaid .node polygon {
  fill: rgba(0, 0, 0, 0.05) !important;   
  stroke: var(--primary-dark) !important;
}

.mermaid-container.dark .mermaid .node rect,
.mermaid-container.dark .mermaid .node polygon {
  fill: rgba(255,255,255,0.06) !important;
  stroke: var(--accent-light) !important;
}

.mermaid-container.light .mermaid .label text {
  fill: var(--primary-darkest) !important;
}

.mermaid-container.dark .mermaid .label text {
  fill: var(--accent-light) !important;
}

.mermaid-container.light .mermaid .edgePath .path {
  stroke: var(--primary) !important;
}

.mermaid-container.dark .mermaid .edgePath .path {
  stroke: var(--accent) !important;
}

/* Collapsed version for mobile */
.mermaid-collapsed {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.35s ease;
}

.mermaid-expanded {
  max-height: 1000px; /* safe for most diagrams */
  transition: max-height 0.45s ease;
}

/* Export button */
.mermaid-export-btn {
  margin-top: 0.75rem;
  padding: 0.5rem 1rem;
  border-radius: var(--radius-sm);
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  color: var(--accent-light);
  cursor: pointer;
  -webkit-backdrop-filter: var(--glass-blur);
  backdrop-filter: var(--glass-blur);
  transition: 0.25s ease;
}

.mermaid-export-btn:hover {
  background: var(--primary);
  color: var(--white);
  transform: translateY(-2px);
}
